@model IEnumerable<Linkofy.Models.Client>

@{
    ViewBag.Title = "Available";
}
    @section Styles {
    <link href="@Url.Content("~/Styles/Index.css")" rel="stylesheet" type="text/css" />
}

<h1>@ViewBag.DomainN Available Clients</h1>

<p class="options"> @Html.ActionLink("Domain List", "Index") |  @Html.ActionLink("Domain Home", "Details", new { id=ViewBag.DomainD })</p>

    <div class="row">
            <div class="col-md-12">
<table class="table">
    <tr> 
        <th>
            @Html.DisplayNameFor(model => model.clientN)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.homePage)
        </th>
                <th>
            @Html.DisplayNameFor(model => model.contName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.clientEmail)
        </th>
              <th>
            @Html.DisplayNameFor(model => model.TrustFlow)
        </th>
                <th>
            @Html.DisplayNameFor(model => model.CitationFlow)
        </th>
                        <th>
            @Html.DisplayNameFor(model => model.RI)
        </th>
                <th>
            @Html.DisplayNameFor(model => model.MJTopics.topicalTF)
        </th>
                        <th>
            Built
        </th>
        <th>
            @Html.DisplayNameFor(model => model.monthlyQuota)
        </th>
                                <th>
            This Month
        </th>
                                        <th>
            Needed
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.Where(p=>p.UserTable.ID == ViewBag.UserTableID)) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.clientN)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.homePage)
        </td>
                <td>
            @Html.DisplayFor(modelItem => item.contName)
        </td> 
        <td>
            @Html.DisplayFor(modelItem => item.clientEmail)
        </td>
                <td>
            @Html.DisplayFor(modelItem => item.TrustFlow)
        </td>
                <td>
            @Html.DisplayFor(modelItem => item.CitationFlow)
        </td>
                                <td>
            @Html.DisplayFor(modelItem => item.RI)
        </td>
                <td>
            @Html.DisplayFor(modelItem => item.MJTopics.topicalTF)
        </td>
                                <td>
            @Html.DisplayFor(modelItem => item.Links.Count)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.monthlyQuota)
        </td>
                                        <td>
        @item.Links.Count(a=>a.BuildDate.Month == DateTime.Now.Month)
                                    </td>
                                        <td>
                                    @(item.monthlyQuota - item.Links.Count(a=>a.BuildDate.Month == DateTime.Now.Month))
        </td> 
        <td>
            @Html.ActionLink(" ", "Details", new { id=item.ID }, new {@class= "glyphicon glyphicon-home" })
            @Html.ActionLink(" ", "SendMail", new { id=item.ID }, new {@class= "glyphicon glyphicon-envelope" })
            @Html.ActionLink(" ", "Edit", new { id=item.ID }, new {@class= "glyphicon glyphicon-edit" }) 
            @Html.ActionLink(" ", "Delete", new { id=item.ID }, new {@class= "glyphicon glyphicon-trash" })
        </td>
    </tr>
}

</table>
                </div>
        </div>
